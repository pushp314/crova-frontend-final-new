import{f as m,i as u,j as s,L as d}from"./index-D7lwuD4-.js";const b=()=>{const{cart:t,removeFromCart:o,updateQuantity:x,loading:p}=m(),[n,l]=u.useState(new Set),c=async(e,a)=>{l(r=>new Set(r).add(e)),await x(e,a),l(r=>{const i=new Set(r);return i.delete(e),i})},h=async e=>{l(a=>new Set(a).add(e)),await o(e),l(a=>{const r=new Set(a);return r.delete(e),r})};return p&&!t?s.jsx("div",{className:"min-h-screen pt-32 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}):!t||t.items.length===0?s.jsxs("div",{className:"min-h-screen pt-32 px-4 flex flex-col items-center justify-center",children:[s.jsx("h2",{className:"text-2xl font-display mb-4",children:"Your cart is empty"}),s.jsx(d,{to:"/shop",className:"underline",children:"Continue Shopping"})]}):s.jsxs("div",{className:"min-h-screen pt-24 md:pt-32 px-4 md:px-12 pb-24 md:pb-20",children:[s.jsx("h1",{className:"text-4xl font-display mb-12",children:"Shopping Cart"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[s.jsx("div",{className:"lg:col-span-2 space-y-8",children:t.items.map(e=>s.jsxs("div",{className:"flex gap-6 py-6 border-b",children:[s.jsx("div",{className:"w-24 h-32 bg-gray-100 flex-shrink-0",children:e.product?.images?.[0]?s.jsx("img",{src:e.product.images[0].imagePath.startsWith("http")?e.product.images[0].imagePath:`http://localhost:8080${e.product.images[0].imagePath}`,alt:e.product.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-xs text-gray-400",children:"No Image"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("h3",{className:"font-medium",children:e.product?.name||"Product Unavailable"}),s.jsxs("p",{children:["₹",(parseFloat(e.product?.price||0)*e.quantity).toFixed(2)]})]}),s.jsx("p",{className:"text-sm text-secondary mb-4",children:e.variant?`${e.variant.size} / ${e.variant.color}`:"Variant Unavailable"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center border border-gray-200",children:[s.jsx("button",{onClick:()=>c(e.variantId,Math.max(1,e.quantity-1)),disabled:n.has(e.variantId)||!e.variant,className:"px-3 py-1 hover:bg-gray-50 disabled:opacity-50",children:"-"}),s.jsx("span",{className:"px-3 py-1 min-w-[3ch] text-center",children:e.quantity}),s.jsx("button",{onClick:()=>c(e.variantId,e.quantity+1),disabled:n.has(e.variantId)||!e.variant,className:"px-3 py-1 hover:bg-gray-50 disabled:opacity-50",children:"+"})]}),s.jsx("button",{onClick:()=>h(e.variantId),disabled:n.has(e.variantId),className:"text-sm underline text-red-500 disabled:opacity-50",children:"Remove"})]})]})]},e.id))}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-gray-50 p-8 sticky top-32",children:[s.jsx("h3",{className:"text-xl font-medium mb-6",children:"Order Summary"}),s.jsxs("div",{className:"space-y-4 mb-8",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{children:["₹",t.items.reduce((e,a)=>e+a.quantity*parseFloat(a.product?.price||0),0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between font-medium text-lg pt-4 border-t",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["₹",t.items.reduce((e,a)=>e+a.quantity*parseFloat(a.product?.price||0),0).toFixed(2)]})]})]}),s.jsx(d,{to:"/checkout",className:"block w-full text-center py-4 bg-black text-white hover:bg-gray-900 transition-colors",children:"Proceed to Checkout"})]})})]})]})};export{b as default};
