import{e as N,r as a,a as h,j as e,L as n,p as b,z as v}from"./index-D7lwuD4-.js";import{P as w}from"./plus-bSVgMRYU.js";import{E as k}from"./eye-Bf6U-b92.js";import{S as P}from"./square-pen-zB8MA1fa.js";import{T as S}from"./trash-2-DGiZsAJM.js";const A=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],L=N("triangle-alert",A),I=()=>{const[r,o]=a.useState([]),[g,x]=a.useState(!0),[i,p]=a.useState(""),[l,u]=a.useState("all");a.useEffect(()=>{y()},[l]);const y=async()=>{x(!0);try{const t={};l==="featured"&&(t.featured=!0),l==="inactive"&&(t.isActive=!1);const{data:s}=await h.get("/products",{params:t});o(s.products||[])}catch(t){console.error("Error fetching products:",t)}finally{x(!1)}},j=async t=>{if(confirm("Are you sure you want to delete this product?"))try{await h.delete(`/products/${t}`),o(r.filter(s=>s.id!==t))}catch(s){console.error("Error deleting product:",s),v.error("Failed to delete product")}},m=r.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())||t.slug.toLowerCase().includes(i.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Products"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your product catalog"})]}),e.jsxs(n,{to:"/admin/products/new",className:"flex items-center gap-2 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:[e.jsx(w,{className:"w-4 h-4"}),"Add Product"]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:i,onChange:t=>p(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),e.jsx("div",{className:"flex gap-2",children:["all","featured","inactive"].map(t=>e.jsx("button",{onClick:()=>u(t),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${l===t?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:g?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-black border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading products..."})]}):m.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No products found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(t=>{const s=t.variants?.reduce((d,f)=>d+(f.stock||0),0)||0,c=s<10;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex-shrink-0 overflow-hidden",children:t.images?.[0]&&e.jsx("img",{src:t.images[0].imagePath.startsWith("http")?t.images[0].imagePath:`http://localhost:8080${t.images[0].imagePath}`,alt:t.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.slug})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:t.category?.name}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["₹",t.price]}),t.comparePrice&&e.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["₹",t.comparePrice]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${c?"text-red-600":"text-gray-900"}`,children:s}),c&&e.jsx(L,{className:"w-4 h-4 text-red-600"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-block px-2.5 py-1 text-xs font-medium rounded-full ${t.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(n,{to:`/product/${t.slug}`,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View",children:e.jsx(k,{className:"w-4 h-4 text-gray-600"})}),e.jsx(n,{to:`/admin/products/${t.id}/edit`,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(P,{className:"w-4 h-4 text-gray-600"})}),e.jsx("button",{onClick:()=>j(t.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(S,{className:"w-4 h-4 text-red-600"})})]})})]},t.id)})})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.length})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.filter(t=>t.isActive).length})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:r.filter(t=>(t.variants?.reduce((c,d)=>c+(d.stock||0),0)||0)<10).length})]})]})]})};export{I as default};
