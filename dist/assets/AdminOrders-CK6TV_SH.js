import{r as a,a as o,j as e,p as N}from"./index-D7lwuD4-.js";import{E as j}from"./eye-Bf6U-b92.js";const v=()=>{const[r,x]=a.useState([]),[m,d]=a.useState(!0),[l,u]=a.useState(""),[n,p]=a.useState("");a.useEffect(()=>{i()},[n]);const i=async()=>{d(!0);try{const t={};n&&(t.status=n);const{data:s}=await o.get("/admin/orders",{params:t});x(s.orders||[])}catch(t){console.error("Error fetching orders:",t)}finally{d(!1)}},g=async(t,s)=>{try{await o.put(`/admin/orders/${t}/status`,{status:s}),i()}catch(y){console.error("Error updating order:",y),alert("Failed to update order status")}},c=r.filter(t=>t.orderNumber?.toLowerCase().includes(l.toLowerCase())||t.user?.name?.toLowerCase().includes(l.toLowerCase())||t.user?.email?.toLowerCase().includes(l.toLowerCase())),h=t=>({PENDING:"bg-yellow-100 text-yellow-700",CONFIRMED:"bg-blue-100 text-blue-700",PAID:"bg-green-100 text-green-700",PROCESSING:"bg-purple-100 text-purple-700",SHIPPED:"bg-indigo-100 text-indigo-700",DELIVERED:"bg-green-100 text-green-700",CANCELLED:"bg-red-100 text-red-700"})[t]||"bg-gray-100 text-gray-700";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage customer orders and fulfillment"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by order number, customer name or email...",value:l,onChange:t=>u(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]}),e.jsxs("select",{value:n,onChange:t=>p(t.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"CONFIRMED",children:"Confirmed"}),e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"PROCESSING",children:"Processing"}),e.jsx("option",{value:"SHIPPED",children:"Shipped"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:m?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-black border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading orders..."})]}):c.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No orders found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["#",t.orderNumber?.slice(0,8)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t._count?.items||0," items"]})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.user?.name||"Guest"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.user?.email})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:"font-semibold text-gray-900",children:["â‚¹",t.totalAmount]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm text-gray-700",children:t.paymentMethod}),e.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded-full w-fit ${t.paymentStatus==="SUCCESS"?"bg-green-100 text-green-700":t.paymentStatus==="PENDING"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:t.paymentStatus})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:t.status,onChange:s=>g(t.id,s.target.value),className:`text-xs font-medium px-2.5 py-1.5 rounded-full border-0 cursor-pointer focus:ring-2 focus:ring-black ${h(t.status)}`,children:[e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"CONFIRMED",children:"Confirmed"}),e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"PROCESSING",children:"Processing"}),e.jsx("option",{value:"SHIPPED",children:"Shipped"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:e.jsx(j,{className:"w-4 h-4 text-gray-600"})})})]},t.id))})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.length})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:r.filter(t=>t.status==="PENDING").length})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Processing"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:r.filter(t=>t.status==="PROCESSING"||t.status==="SHIPPED").length})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:r.filter(t=>t.status==="DELIVERED").length})]})]})]})};export{v as default};
