import{r,a as o,j as e,p as N,U as b,M as w}from"./index-D7lwuD4-.js";import{C as v}from"./calendar-DHPXZ5b2.js";import{T as U}from"./trash-2-DGiZsAJM.js";const T=()=>{const[c,p]=r.useState([]),[u,x]=r.useState(!0),[n,h]=r.useState(""),[a,i]=r.useState(1),[l,g]=r.useState(1),y=10;r.useEffect(()=>{const s=setTimeout(()=>{d()},500);return()=>clearTimeout(s)},[a,n]);const d=async()=>{x(!0);try{const{data:s}=await o.get("/admin/users",{params:{page:a,limit:y,search:n}});p(s.users),g(s.pagination.pages)}catch(s){console.error("Error fetching users:",s)}finally{x(!1)}},f=async(s,t)=>{if(window.confirm(`Are you sure you want to change this user's role to ${t}?`))try{await o.put(`/admin/users/${s}/role`,{role:t}),d()}catch(m){console.error("Error updating role:",m),alert(m.response?.data?.message||"Failed to update user role")}},j=async s=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await o.delete(`/admin/users/${s}`),d()}catch(t){console.error("Error deleting user:",t),alert(t.response?.data?.message||"Failed to delete user")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Users"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage customer accounts and permissions"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:n,onChange:s=>{h(s.target.value),i(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:u?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-black border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading users..."})]}):c.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(b,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No users found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 font-medium text-sm",children:s.name?.[0]?.toUpperCase()||"U"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name||"No Name"}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"}),s.email]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:s.role,onChange:t=>f(s.id,t.target.value),className:`text-xs font-medium px-2.5 py-1 rounded-full border-0 cursor-pointer focus:ring-1 focus:ring-black ${s.role==="ADMIN"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:[e.jsx("option",{value:"USER",children:"USER"}),e.jsx("option",{value:"ADMIN",children:"ADMIN"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.isEmailVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.isEmailVerified?"Verified":"Pending"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),new Date(s.createdAt).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>j(s.id),className:"text-red-600 hover:text-red-900 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",children:e.jsx(U,{className:"w-4 h-4"})})})]},s.id))})]})})}),l>1&&e.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[e.jsx("button",{onClick:()=>i(s=>Math.max(1,s-1)),disabled:a===1,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-600",children:["Page ",a," of ",l]}),e.jsx("button",{onClick:()=>i(s=>Math.min(l,s+1)),disabled:a===l,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})};export{T as default};
