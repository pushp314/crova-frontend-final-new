import{e as L,d as _,r as t,a as n,j as e,k as B,S as H,L as p,z as x}from"./index-D7lwuD4-.js";import{P as S}from"./package-D2mZ27oQ.js";import{P as b}from"./pen-tool-DhMvfcDc.js";import{P as A}from"./plus-bSVgMRYU.js";import{T as V}from"./trash-2-DGiZsAJM.js";import{C as J}from"./circle-check-big-Bo8zuqVM.js";const W=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],f=L("map-pin",W);const G=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],D=L("shield",G),re=()=>{const{user:o,logout:E}=_(),[l,c]=t.useState("orders"),[y,$]=t.useState([]),[u,j]=t.useState([]),[N,q]=t.useState([]),[I,O]=t.useState(!0),[T,w]=t.useState(!1),[M,v]=t.useState(!1),[m,C]=t.useState(!1),[a,d]=t.useState({fullName:"",phone:"",address:"",city:"",state:"",postalCode:"",country:"India",isDefault:!1}),[i,g]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[k,K]=t.useState(!1);t.useEffect(()=>{o&&(R(),P(),U())},[o]);const R=async()=>{try{const{data:s}=await n.get("/orders");s.success&&$(s.data?.orders||s.orders||[])}catch(s){console.error("Error fetching orders:",s)}finally{O(!1)}},P=async()=>{try{w(!0);const{data:s}=await n.get("/users/addresses");s.success&&j(s.data?.addresses||s.addresses||[])}catch(s){console.error("Error fetching addresses:",s)}finally{w(!1)}},U=async()=>{try{v(!0);const{data:s}=await n.get("/design/my-inquiries");q(s.data?.inquiries||[])}catch(s){console.error("Error fetching inquiries:",s)}finally{v(!1)}},F=async s=>{s.preventDefault();try{const{data:r}=await n.post("/users/addresses",a);r.success&&(x.success("Address added successfully"),P(),C(!1),d({fullName:"",phone:"",address:"",city:"",state:"",postalCode:"",country:"India",isDefault:!1}))}catch(r){console.error("Error adding address:",r),x.error(r.response?.data?.message||"Failed to add address")}},z=async s=>{if(confirm("Are you sure you want to delete this address?"))try{await n.delete(`/users/addresses/${s}`),x.success("Address deleted"),j(u.filter(r=>r.id!==s))}catch(r){console.error("Error deleting address:",r),x.error("Failed to delete address")}};return o?e.jsx("div",{className:"min-h-screen pt-32 px-4 md:px-12 pb-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-display font-bold mb-8",children:"My Account"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1 space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl font-bold text-gray-400",children:o.name?.charAt(0)||"U"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:o.name}),e.jsx("p",{className:"text-sm text-gray-500",children:o.email})]})]}),e.jsxs("nav",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>c("orders"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors font-medium ${l==="orders"?"bg-black text-white":"hover:bg-gray-50 text-gray-600"}`,children:[e.jsx(S,{className:"w-5 h-5"}),"Orders"]}),e.jsxs("button",{onClick:()=>c("addresses"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors font-medium ${l==="addresses"?"bg-black text-white":"hover:bg-gray-50 text-gray-600"}`,children:[e.jsx(f,{className:"w-5 h-5"}),"Addresses"]}),e.jsxs("button",{onClick:()=>c("designs"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors font-medium ${l==="designs"?"bg-black text-white":"hover:bg-gray-50 text-gray-600"}`,children:[e.jsx(b,{className:"w-5 h-5"}),"Custom Designs"]}),e.jsxs("button",{onClick:()=>c("security"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors font-medium ${l==="security"?"bg-black text-white":"hover:bg-gray-50 text-gray-600"}`,children:[e.jsx(D,{className:"w-5 h-5"}),"Security"]})]}),e.jsx("hr",{className:"my-4 border-gray-100"}),e.jsxs("button",{onClick:E,className:"w-full flex items-center gap-2 text-red-600 font-medium hover:bg-red-50 px-4 py-3 rounded-xl transition-colors",children:[e.jsx(B,{className:"w-5 h-5"}),"Sign Out"]})]})}),e.jsx("div",{className:"lg:col-span-3",children:l==="orders"?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Order History"]})}),I?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading orders..."}):y.length===0?e.jsxs("div",{className:"p-12 text-center flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(H,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start shopping to see your orders here."}),e.jsx(p,{to:"/shop",className:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Browse Shop"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:y.map(s=>e.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-mono text-sm text-gray-500",children:["#",s.orderNumber?.slice(0,8).toUpperCase()]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:new Date(s.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${s.paymentStatus==="SUCCESS"?"bg-green-50 text-green-700 border-green-100":"bg-yellow-50 text-yellow-700 border-yellow-100"}`,children:s.paymentStatus==="SUCCESS"?"Paid":"Payment Pending"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${s.status==="DELIVERED"?"bg-blue-50 text-blue-700 border-blue-100":s.status==="CANCELLED"?"bg-red-50 text-red-700 border-red-100":"bg-gray-50 text-gray-700 border-gray-200"}`,children:s.status})]})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:s.items?.map((r,h)=>e.jsxs("div",{className:"w-16 h-20 bg-gray-100 rounded-lg flex-shrink-0 overflow-hidden relative border border-gray-200",children:[(r.variant?.product?.images?.[0]||r.product?.images?.[0])&&e.jsx("img",{src:(r.variant?.product?.images?.[0]?.imagePath||r.product?.images?.[0]?.imagePath||"").startsWith("http")?r.variant?.product?.images?.[0]?.imagePath||r.product?.images?.[0]?.imagePath:`http://localhost:8080${r.variant?.product?.images?.[0]?.imagePath||r.product?.images?.[0]?.imagePath}`,alt:"",className:"w-full h-full object-cover opacity-90"}),e.jsx("span",{className:"absolute bottom-0 right-0 bg-black/50 text-white text-[10px] px-1",children:r.quantity})]},h))}),e.jsx("div",{className:"mt-4 flex justify-between items-center border-t border-gray-100 pt-4",children:e.jsxs("p",{className:"font-medium",children:["Total: â‚¹",Number(s.totalAmount).toFixed(2)]})})]},s.id))})]}):l==="addresses"?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),"My Addresses"]}),e.jsxs("button",{onClick:()=>C(!m),className:"flex items-center gap-2 text-sm font-medium text-black hover:text-gray-700",children:[e.jsx(A,{className:"w-4 h-4"}),m?"Cancel":"Add New"]})]}),m&&e.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-100 animation-fade-in",children:e.jsxs("form",{onSubmit:F,className:"space-y-4 max-w-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{placeholder:"Full Name",className:"w-full p-3 border rounded-lg",value:a.fullName,onChange:s=>d({...a,fullName:s.target.value}),required:!0}),e.jsx("input",{placeholder:"Phone Number",className:"w-full p-3 border rounded-lg",value:a.phone,onChange:s=>d({...a,phone:s.target.value}),required:!0})]}),e.jsx("input",{placeholder:"Street Address",className:"w-full p-3 border rounded-lg",value:a.address,onChange:s=>d({...a,address:s.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{placeholder:"City",className:"w-full p-3 border rounded-lg",value:a.city,onChange:s=>d({...a,city:s.target.value}),required:!0}),e.jsx("input",{placeholder:"State",className:"w-full p-3 border rounded-lg",value:a.state,onChange:s=>d({...a,state:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{placeholder:"Postal Code",className:"w-full p-3 border rounded-lg",value:a.postalCode,onChange:s=>d({...a,postalCode:s.target.value}),required:!0}),e.jsx("input",{placeholder:"Country",className:"w-full p-3 border rounded-lg bg-gray-100",value:a.country,disabled:!0})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:a.isDefault,onChange:s=>d({...a,isDefault:s.target.checked})}),"Set as default address"]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors",children:"Save Address"})]})}),T?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading addresses..."}):u.length===0?!m&&e.jsxs("div",{className:"p-12 text-center flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(f,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No addresses saved"}),e.jsx("p",{className:"text-gray-500",children:"Add an address for faster checkout."})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:u.map(s=>e.jsxs("div",{className:"p-6 flex justify-between items-start hover:bg-gray-50 transition-colors group",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-bold",children:s.fullName}),s.isDefault&&e.jsx("span",{className:"bg-gray-100 text-gray-600 text-[10px] px-2 py-0.5 rounded-full font-medium uppercase tracking-wide",children:"Default"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.address}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.city,", ",s.state," ",s.postalCode]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.country}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Ph: ",s.phone]})]}),e.jsx("button",{onClick:()=>z(s.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Delete Address",children:e.jsx(V,{className:"w-4 h-4"})})]},s.id))})]}):l==="designs"?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5"}),"My Design Inquiries"]}),e.jsxs(p,{to:"/custom-design",className:"flex items-center gap-2 text-sm font-medium text-black hover:text-gray-700",children:[e.jsx(A,{className:"w-4 h-4"}),"New Inquiry"]})]}),M?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading inquiries..."}):N.length===0?e.jsxs("div",{className:"p-12 text-center flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(b,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No design inquiries yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Have a custom idea? Let us bring it to life."}),e.jsx(p,{to:"/custom-design",className:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Start Custom Design"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:N.map(s=>e.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Submitted on ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${s.status==="CONTACTED"?"bg-blue-50 text-blue-700 border-blue-100":s.status==="COMPLETED"?"bg-green-50 text-green-700 border-green-100":s.status==="REJECTED"?"bg-red-50 text-red-700 border-red-100":"bg-yellow-50 text-yellow-700 border-yellow-100"}`,children:s.status})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 text-gray-700 text-sm whitespace-pre-wrap border border-gray-100",children:s.description}),s.images&&s.images.length>0&&e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 mb-4",children:s.images.map((r,h)=>e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden border border-gray-200 flex-shrink-0",children:e.jsx("img",{src:`http://localhost:8080${r}`,alt:"reference",className:"w-full h-full object-cover"})},h))}),s.adminReply&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsxs("h4",{className:"text-xs font-bold uppercase tracking-wider text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx(J,{className:"w-3 h-3"})," Response from Admin"]}),e.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-wrap",children:s.adminReply}),e.jsxs("p",{className:"text-xs text-blue-400 mt-2",children:["Received ",new Date(s.adminReplyAt).toLocaleString()]})]})]},s.id))})]}):l==="security"?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Login & Security"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:handlePasswordChange,className:"max-w-lg space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none",value:i.currentPassword,onChange:s=>g({...i,currentPassword:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{type:"password",required:!0,minLength:6,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none",value:i.newPassword,onChange:s=>g({...i,newPassword:s.target.value})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 6 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",required:!0,minLength:6,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none",value:i.confirmPassword,onChange:s=>g({...i,confirmPassword:s.target.value})})]}),e.jsx("button",{type:"submit",disabled:k,className:"w-full py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Updating...":"Update Password"})]})})]}):null})]})]})}):e.jsx("div",{className:"min-h-screen pt-32 px-4 flex justify-center",children:e.jsx("p",{children:"Please log in to view your profile."})})};export{re as default};
