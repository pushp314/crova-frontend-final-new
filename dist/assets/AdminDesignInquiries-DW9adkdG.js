import{e as g,r as l,a as m,j as e,p as C,M as j,z as c}from"./index-D7lwuD4-.js";import{C as E}from"./calendar-DHPXZ5b2.js";import{C as D}from"./circle-check-big-Bo8zuqVM.js";import{P as R}from"./pen-tool-DhMvfcDc.js";const S=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],L=g("clock",S);const I=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],T=g("image",I);const A=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],M=g("phone",A),O=()=>{const[i,n]=l.useState([]),[f,h]=l.useState(!0),[o,N]=l.useState(""),[a,d]=l.useState(null),[x,p]=l.useState("");l.useEffect(()=>{w()},[]);const v=async s=>{try{const{data:r}=await m.put(`/design/${s}/reply`,{reply:x}),t=r.data.inquiry;n(i.map(b=>b.id===s?t:b)),d(t),p(""),c.success("Reply sent successfully")}catch(r){console.error("Reply error:",r),c.error("Failed to send reply")}},w=async()=>{h(!0);try{const{data:s}=await m.get("/design");n(s.data.inquiries||[])}catch(s){console.error("Error fetching inquiries:",s)}finally{h(!1)}},k=async(s,r)=>{try{await m.put(`/design/${s}/status`,{status:r}),n(i.map(t=>t.id===s?{...t,status:r}:t)),c.success(`Marked as ${r}`),a?.id===s&&d({...a,status:r})}catch{c.error("Failed to update status")}},u=({status:s})=>{const r={PENDING:"bg-yellow-100 text-yellow-800",CONTACTED:"bg-blue-100 text-blue-800",COMPLETED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${r[s]||"bg-gray-100"}`,children:s})},y=i.filter(s=>s.name.toLowerCase().includes(o.toLowerCase())||s.email.toLowerCase().includes(o.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Design Inquiries"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-200px)]",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-xl border border-gray-200 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:o,onChange:s=>N(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:f?e.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading..."}):y.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No inquiries found"}):e.jsx("div",{className:"divide-y divide-gray-100",children:y.map(s=>e.jsxs("div",{onClick:()=>d(s),className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${a?.id===s.id?"bg-gray-50 border-l-4 border-black":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx(u,{status:s.status})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-2 truncate",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(E,{className:"w-3 h-3"}),new Date(s.createdAt).toLocaleDateString()]})]},s.id))})})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl border border-gray-200 overflow-hidden flex flex-col",children:a?e.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-100 pb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.name}),e.jsxs("div",{className:"flex flex-col gap-1 text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"})," ",a.email]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"})," ",a.phone]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"})," ",new Date(a.createdAt).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3",children:[e.jsx(u,{status:a.status}),e.jsxs("select",{className:"text-sm border border-gray-200 rounded-lg p-2 bg-gray-50",value:a.status,onChange:s=>k(a.id,s.target.value),children:[e.jsx("option",{value:"PENDING",children:"Mark as Pending"}),e.jsx("option",{value:"CONTACTED",children:"Mark as Contacted"}),e.jsx("option",{value:"COMPLETED",children:"Mark as Completed"}),e.jsx("option",{value:"REJECTED",children:"Mark as Rejected"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 mb-3",children:"Vision / Notes"}),e.jsx("div",{className:"p-6 bg-gray-50 rounded-xl text-gray-800 leading-relaxed whitespace-pre-wrap border border-gray-100",children:a.description})]}),a.images&&a.images.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 mb-4 flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"})," Attachments (",a.images.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-6",children:a.images.map((s,r)=>e.jsxs("div",{className:"group relative aspect-square bg-gray-100 rounded-xl overflow-hidden border border-gray-200 shadow-sm",children:[e.jsx("img",{src:`http://localhost:8080${s}`,alt:"Design reference",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onClick:()=>window.open(`http://localhost:8080${s}`,"_blank")}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors cursor-pointer"})]},r))})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-100",children:[e.jsxs("h3",{className:"text-sm font-bold uppercase tracking-wider text-gray-500 mb-4 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"})," Admin Reply"]}),a.adminReply?e.jsxs("div",{className:"p-6 bg-blue-50 rounded-xl text-blue-900 border border-blue-100",children:[e.jsx("p",{className:"whitespace-pre-wrap",children:a.adminReply}),e.jsxs("div",{className:"mt-3 text-xs text-blue-500 flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),"Replied on ",new Date(a.adminReplyAt).toLocaleString()]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{value:x,onChange:s=>p(s.target.value),placeholder:"Type your reply here...",className:"w-full p-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-black min-h-[120px] resize-none"}),e.jsx("button",{onClick:()=>v(a.id),disabled:!x.trim(),className:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Send Reply"})]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(R,{className:"w-16 h-16 mb-4 opacity-20"}),e.jsx("p",{children:"Select an inquiry to view details"})]})})]})]})};export{O as default};
