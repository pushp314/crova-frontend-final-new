import{r as t,a as g,j as s,L as j}from"./index-D7lwuD4-.js";const y="http://localhost:8080",N=()=>{const[h,u]=t.useState([]),[a,r]=t.useState("All"),[l,c]=t.useState([]),[p,i]=t.useState(!0),[n,o]=t.useState(null);t.useEffect(()=>{f()},[]),t.useEffect(()=>{d()},[a]);const f=async()=>{try{const{data:e}=await g.get("/categories");e.success&&u(e.data.categories||e.categories||[])}catch(e){console.error("Error fetching categories:",e)}},d=async()=>{try{i(!0),o(null);const e={};a!=="All"&&(e.category=a);const{data:m}=await g.get("/products",{params:e}),x=m?.data?.products||m?.products||[];c(Array.isArray(x)?x:[])}catch(e){console.error("Error fetching products:",e),o(e.message||"Failed to load products"),c([])}finally{i(!1)}};return p&&l.length===0?s.jsx("div",{className:"min-h-screen pt-32 px-4 flex justify-center",children:s.jsx("div",{className:"animate-pulse",children:"Loading..."})}):n?s.jsxs("div",{className:"min-h-screen pt-32 px-4 flex flex-col justify-center items-center",children:[s.jsxs("div",{className:"text-red-600 mb-4",children:["⚠️ ",n]}),s.jsx("button",{onClick:()=>d(),className:"px-4 py-2 bg-black text-white rounded hover:bg-gray-800",children:"Retry"})]}):s.jsxs("div",{className:"min-h-screen pt-32 px-4 md:px-12 pb-20",children:[s.jsx("h1",{className:"text-4xl font-display mb-8 text-center",children:"Shop"}),s.jsx("div",{className:"flex justify-center mb-12 overflow-x-auto pb-4 hide-scrollbar",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>r("All"),className:`px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap
                            ${a==="All"?"bg-black text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),h.map(e=>s.jsx("button",{onClick:()=>r(e.name),className:`px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap
                                ${a===e.name?"bg-black text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.name},e.id))]})}),l.length===0?s.jsxs("div",{className:"text-center py-20",children:[s.jsx("p",{className:"text-gray-500 text-lg",children:"No products found"}),a!=="All"&&s.jsx("button",{onClick:()=>r("All"),className:"mt-4 text-black underline",children:"View all products"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:l.map(e=>s.jsxs(j,{to:`/product/${e.slug}`,className:"group",children:[s.jsxs("div",{className:"aspect-[3/4] overflow-hidden bg-gray-100 mb-4 rounded-2xl relative",children:[e.images?.[0]?s.jsx("img",{src:e.images[0].imagePath.startsWith("http")?e.images[0].imagePath:`${y}${e.images[0].imagePath}`,alt:e.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:"No Image"}),e.comparePrice&&s.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-xs font-semibold",children:"Sale"})]}),s.jsx("h3",{className:"text-lg font-medium",children:e.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("p",{className:"text-secondary",children:["₹",e.price]}),e.comparePrice&&s.jsxs("p",{className:"text-gray-400 text-sm line-through",children:["₹",e.comparePrice]})]})]},e.id))})]})};export{N as default};
