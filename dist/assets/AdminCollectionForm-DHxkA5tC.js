import{c as y,u as b,r as c,a as u,j as e}from"./index-D7lwuD4-.js";import{A as j}from"./arrow-left-Yl0ryfsv.js";import{S as N}from"./save-Dw-do1PM.js";const W=()=>{const m=y(),{id:n}=b(),i=!!n,[g,x]=c.useState(!1),[t,f]=c.useState({title:"",slug:"",description:"",image:"",theme:"#ffffff",textColor:"#000000"}),[v,C]=c.useState([]),[w,S]=c.useState("");c.useEffect(()=>{i&&h()},[n]);const h=async()=>{try{const{data:l}=await u.get("/collections"),a=(l.data?.collections||[]).find(r=>r.id===n);if(a){let r=a.theme;r.startsWith("bg-")&&(r="#ffffff");let d=a.textColor;d&&d.startsWith("text-")&&(d="#000000"),f({title:a.title,slug:a.slug,description:a.description||"",image:a.image||"",theme:r,textColor:d})}}catch(l){console.error("Error fetching collection:",l)}},o=l=>{const{name:s,value:a}=l.target;f(r=>({...r,[s]:a,slug:s==="title"&&!i?a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""):r.slug}))},p=async l=>{l.preventDefault(),x(!0);try{const s={...t};!s.theme.startsWith("#")&&!s.theme.startsWith("bg-")&&(s.theme=`#${s.theme}`),i?await u.put(`/collections/${n}`,s):await u.post("/collections",s),m("/admin/collections")}catch(s){console.error("Save error:",s),alert("Failed to save collection")}finally{x(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>m("/admin/collections"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(j,{className:"w-5 h-5"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:i?"Edit Collection":"New Collection"})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:o,required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Slug"}),e.jsx("input",{type:"text",name:"slug",value:t.slug,onChange:o,required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:outline-none bg-gray-50"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{name:"description",value:t.description,onChange:o,rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Image URL"}),e.jsx("input",{type:"url",name:"image",value:t.image,onChange:o,placeholder:"https://...",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:outline-none"}),t.image&&e.jsx("img",{src:t.image,alt:"Preview",className:"h-32 w-auto object-cover rounded-lg mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Background Color (Dynamic)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",name:"theme",value:t.theme.startsWith("#")?t.theme:"#ffffff",onChange:o,className:"w-12 h-12 rounded border border-gray-200 p-1 cursor-pointer"}),e.jsx("input",{type:"text",name:"theme",value:t.theme,onChange:o,placeholder:"#ffffff",className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:outline-none"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Select a color to make the background dynamic."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Text Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",name:"textColor",value:t.textColor.startsWith("#")?t.textColor:"#000000",onChange:o,className:"w-12 h-12 rounded border border-gray-200 p-1 cursor-pointer"}),e.jsx("input",{type:"text",name:"textColor",value:t.textColor,onChange:o,placeholder:"#000000",className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-black focus:outline-none"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>m("/admin/collections"),className:"px-6 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:g,className:"px-6 py-2.5 bg-black text-white font-medium rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-70 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),g?"Saving...":"Save Collection"]})]})]})]})};export{W as default};
